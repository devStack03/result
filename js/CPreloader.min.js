function CPreloader(){var e,t,a,i,r,s,d,n,o,l;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg"),s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png"),s_oSpriteLibrary.loadSprites(),l=new createjs.Container,s_oStage.addChild(l)},this.unload=function(){l.removeAllChildren(),o.unload()},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),l.addChild(h);var _=s_oSpriteLibrary.getSprite("200x200");(d=createBitmap(_)).regX=.5*_.width,d.regY=.5*_.height,d.x=CANVAS_WIDTH/2,d.y=CANVAS_HEIGHT/2-180,l.addChild(d),(n=new createjs.Shape).graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(d.x-100,d.y-100,200,200,10),l.addChild(n),d.mask=n;_=s_oSpriteLibrary.getSprite("progress_bar");(i=createBitmap(_)).x=CANVAS_WIDTH/2-_.width/2,i.y=CANVAS_HEIGHT/2+50,l.addChild(i),e=_.width,t=_.height,(r=new createjs.Shape).graphics.beginFill("rgba(0,0,0,0.01)").drawRect(i.x,i.y,1,t),l.addChild(r),i.mask=r,(a=new createjs.Text("","30px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH/2,a.y=CANVAS_HEIGHT/2+100,a.textBaseline="alphabetic",a.textAlign="center",l.addChild(a);_=s_oSpriteLibrary.getSprite("but_start");(o=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2,_,TEXT_PRELOADER_CONTINUE,"Arial","#000",50,l)).addEventListener(ON_MOUSE_UP,this._onButStartRelease,this),o.setVisible(!1),o.removeStroke(),(s=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),l.addChild(s),createjs.Tween.get(s).to({alpha:0},500).call((function(){createjs.Tween.removeTweens(s),l.removeChild(s)}))},this._onButStartRelease=function(){s_oMain._allResourcesLoaded()},this.refreshLoader=function(s){a.text=s+"%",100===s&&(s_oMain._allResourcesLoaded(),a.visible=!1,i.visible=!1),r.graphics.clear();var d=Math.floor(s*e/100);r.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(i.x,i.y,d,t)},this._init()}