function CInterface(){var t,e,i,s,a,o,n,r,_,l,c,h,S,u,E,p,d;return this._init=function(){t=!0,e=!0;var x=s_oSpriteLibrary.getSprite("but_exit");console.log("canvas width: "+CANVAS_WIDTH+" canvas height: "+CANVAS_HEIGHT),u={x:CANVAS_WIDTH-x.width/2-65,y:x.height/2+10},(i=new CGfxButton(u.x,u.y,x,s_oStage)).addEventListener(ON_MOUSE_UP,this._onExit,this);x=s_oSpriteLibrary.getSprite("top_logo_line");_pStartPosSnickers={x:30,y:50},(c=createBitmap(x)).x=_pStartPosSnickers.x,c.y=_pStartPosSnickers.y,s_oStage.addChild(c);x=s_oSpriteLibrary.getSprite("extra_logo");_pStartPosExtra={x:_pStartPosSnickers.x,y:_pStartPosSnickers.y+x.height/2+60},(h=createBitmap(x)).x=_pStartPosExtra.x,h.y=_pStartPosExtra.y;var g=window.innerWidth,P=window.innerHeight;console.log("width: ",g),console.log("height: ",P);var y=(x=s_oSpriteLibrary.getSprite("button_grp")).width/2;_pStartPosButGrp={x:CANVAS_WIDTH-x.width-20,y:CANVAS_HEIGHT/2-x.height/1.5},console.log("canvas wi: ",x.width),(S=createBitmap(x)).x=_pStartPosButGrp.x,S.y=_pStartPosButGrp.y,s_oStage.addChild(S),_pStartPosPause={x:_pStartPosButGrp.x+y,y:_pStartPosButGrp.y+90};var f=s_oSpriteLibrary.getSprite("toggle_rotation");p={x:_pStartPosPause.x,y:_pStartPosPause.y},ENABLE_ROT_PIECE?(a=new CToggle(p.x,p.y,f,e,s_oStage)).addEventListener(ON_MOUSE_UP,this._onRotationRelease,this):e=!1;x=s_oSpriteLibrary.getSprite("but_restart");d={x:_pStartPosPause.x,y:_pStartPosPause.y+x.height+10},console.log("_pStartPosRestart x: "+d.x),console.log("_pStartPosRestart y: "+d.y),(o=new CGfxButton(d.x,d.y,x,s_oStage)).addEventListener(ON_MOUSE_UP,this._onRestartRelease,this);var A=s_oSpriteLibrary.getSprite("but_preview");E={x:d.x,y:d.y+x.height+10},(s=new CToggle(E.x,E.y,A,t,s_oStage)).addEventListener(ON_MOUSE_UP,this._onPreviewRelease,this);x=s_oSpriteLibrary.getSprite("time_bg");var R=createBitmap(x);R.scaleX=R.scaleY=1.3,R.x=BOARD_X-40,R.y=BOARD_Y-25-x.height/2,s_oStage.addChild(R),(n=new createjs.Text(TEXT_TIME,"bold 30px "+PRIMARY_FONT,"#152B79")).x=BOARD_X+15,n.y=BOARD_Y-15,n.textAlign="left",n.textBaseline="alphabetic",n.lineWidth=200,s_oStage.addChild(n),(r=new createjs.Text("00:00","bold 30px "+PRIMARY_FONT,"#ffffff")).x=n.x+n.getBounds().width+30,r.y=n.y,r.textAlign="left",r.textBaseline="alphabetic",r.lineWidth=200,r.shadow=new createjs.Shadow("#152B79",4,4,0),s_oStage.addChild(r),(l=new createjs.Shape).graphics.beginFill("white").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),l.alpha=0,s_oStage.addChild(l),_=new CAreYouSurePanel(s_oStage),this.enableGUI(!1),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.unload=function(){ENABLE_ROT_PIECE&&a.unload(),ENABLE_PREVIEW&&s.unload(),i.unload(),o.unload(),s_oInterface=null},this.refreshButtonPos=function(t,e){i.setPosition(u.x-t,e+u.y),ENABLE_ROT_PIECE&&a.setPosition(p.x-t,p.y+e),ENABLE_PREVIEW&&s.setPosition(E.x-t,E.y+e),o.setPosition(d.x-t,d.y+e),c.x=_pStartPosSnickers.x+t,c.y=_pStartPosSnickers.y+e,h.x=_pStartPosExtra.x+t,h.y=_pStartPosExtra.y+e,S.x=_pStartPosButGrp.x-t,S.y=_pStartPosButGrp.y+e},this.enableGUI=function(t){t?(ENABLE_PREVIEW&&s.enable(),ENABLE_ROT_PIECE&&a.enable(),i.enable()):(ENABLE_PREVIEW&&s.disable(),ENABLE_ROT_PIECE&&a.disable(),i.disable())},this.refreshTime=function(t){r.text=t},this.playWinEffect=function(){createjs.Tween.get(l).to({alpha:1},200,createjs.Ease.cubicOut).call((function(){s_oGame.placePiecesInCorrectPosition(),createjs.Tween.get(l).to({alpha:0},200,createjs.Ease.cubicOut).call((function(){s_oGame.playFinalEffect()}))}))},this.resetFullscreenBut=function(){null},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this._onExit=function(){s_oGame.pause(!0),_.show(TEXT_ARE_YOU_SURE),_.addEventListener(ON_RELEASE_YES,this._onReleaseYes),_.addEventListener(ON_RELEASE_NO,this._onReleaseNo)},this._onReleaseYes=function(){$(s_oMain).trigger("end_session"),$(s_oMain).trigger("show_interlevel_ad"),s_oGame.onExitToMenu()},this._onReleaseNo=function(){s_oGame.pause(!1)},this._onPreviewRelease=function(){t=!t,s_oGame.showPreview(t)},this._onRotationRelease=function(){e=!e,s_oGame.toggleRotation(e)},this._onRestartRelease=function(){s_oGame.restart()},this._onFullscreenRelease=function(){s_bFullscreen?null.call(window.document):null.call(window.document.documentElement),sizeHandler()},this.isPreviewVisible=function(){return t},this.isRotationActive=function(){return e},s_oInterface=this,this._init(),this}var s_oInterface=null;