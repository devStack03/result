function CInterface(){var t,e,s,i,a,o,n,r,_,l,S,h,c,u,p,E,d,P;return this._init=function(){t=!1,e=!0;var x=s_oSpriteLibrary.getSprite("but_exit");console.log("canvas width: "+CANVAS_WIDTH+" canvas height: "+CANVAS_HEIGHT),p={x:CANVAS_WIDTH-x.width/2-10,y:x.height/2+10},(s=new CGfxButton(p.x,p.y,x,s_oStage)).addEventListener(ON_MOUSE_UP,this._onExit,this);x=s_oSpriteLibrary.getSprite("snickers_logo");_pStartPosSnickers={x:x.height/2,y:x.height/2},(S=createBitmap(x)).x=_pStartPosSnickers.x,S.y=_pStartPosSnickers.y,s_oStage.addChild(S);x=s_oSpriteLibrary.getSprite("extra_logo");_pStartPosExtra={x:_pStartPosSnickers.x,y:_pStartPosSnickers.y+x.height/2+60},(h=createBitmap(x)).x=_pStartPosExtra.x,h.y=_pStartPosExtra.y,s_oStage.addChild(h);var g=(x=s_oSpriteLibrary.getSprite("button_grp")).width/2;_pStartPosButGrp={x:CANVAS_WIDTH-x.width-10,y:CANVAS_HEIGHT/2-x.height/2},(c=createBitmap(x)).x=_pStartPosButGrp.x,c.y=_pStartPosButGrp.y,s_oStage.addChild(c);x=s_oSpriteLibrary.getSprite("but_pause");_pStartPosPause={x:_pStartPosButGrp.x+g,y:_pStartPosButGrp.y+90},(u=new CGfxButton(_pStartPosPause.x,_pStartPosPause.y,x,s_oStage)).addEventListener(ON_MOUSE_UP,this._onRestartRelease,this);x=s_oSpriteLibrary.getSprite("but_restart");P={x:_pStartPosPause.x,y:_pStartPosPause.y+x.height+10},console.log("_pStartPosRestart x: "+P.x),console.log("_pStartPosRestart y: "+P.y),(o=new CGfxButton(P.x,P.y,x,s_oStage)).addEventListener(ON_MOUSE_UP,this._onRestartRelease,this);var y=s_oSpriteLibrary.getSprite("but_preview");E={x:P.x,y:P.y+x.height+10},console.log("_pStartPosPreview x: "+E.x),console.log("_pStartPosPreview y: "+E.y),(i=new CGfxButton(E.x,E.y,y,s_oStage)).addEventListener(ON_MOUSE_UP,this._onPreviewRelease,this);var f=s_oSpriteLibrary.getSprite("toggle_rotation");d={x:E.x-f.width/2-10,y:E.y},ENABLE_ROT_PIECE?(a=new CToggle(d.x,d.y,f,e,s_oStage)).addEventListener(ON_MOUSE_UP,this._onRotationRelease,this):e=!1;x=s_oSpriteLibrary.getSprite("time_bg");var A=createBitmap(x);A.scaleX=A.scaleY=1.3,A.x=BOARD_X-40,A.y=BOARD_Y-25-x.height/2,s_oStage.addChild(A),(n=new createjs.Text(TEXT_TIME,"bold 30px "+PRIMARY_FONT,"#152B79")).x=BOARD_X+15,n.y=BOARD_Y-15,n.textAlign="left",n.textBaseline="alphabetic",n.lineWidth=200,s_oStage.addChild(n),(r=new createjs.Text("00:00","bold 30px "+PRIMARY_FONT,"#ffffff")).x=n.x+n.getBounds().width+30,r.y=n.y,r.textAlign="left",r.textBaseline="alphabetic",r.lineWidth=200,r.shadow=new createjs.Shadow("#152B79",4,4,0),s_oStage.addChild(r),(l=new createjs.Shape).graphics.beginFill("white").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),l.alpha=0,s_oStage.addChild(l),_=new CAreYouSurePanel(s_oStage),this.enableGUI(!1),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.unload=function(){ENABLE_ROT_PIECE&&a.unload(),ENABLE_PREVIEW&&i.unload(),s.unload(),o.unload(),s_oInterface=null},this.refreshButtonPos=function(t,e){s.setPosition(p.x-t,e+p.y),ENABLE_ROT_PIECE&&a.setPosition(d.x-t,d.y-e),ENABLE_PREVIEW&&i.setPosition(E.x-t,E.y+e),o.setPosition(P.x-t,P.y+e),S.x=_pStartPosSnickers.x+t,S.y=_pStartPosSnickers.y+e,h.x=_pStartPosExtra.x+t,h.y=_pStartPosExtra.y+e,c.x=_pStartPosButGrp.x-t,c.y=_pStartPosButGrp.y+e,u.setPosition(_pStartPosPause.x-t,_pStartPosPause.y+e)},this.enableGUI=function(t){t?(ENABLE_PREVIEW&&i.enable(),ENABLE_ROT_PIECE&&a.enable(),s.enable()):(ENABLE_PREVIEW&&i.disable(),ENABLE_ROT_PIECE&&a.disable(),s.disable())},this.refreshTime=function(t){r.text=t},this.playWinEffect=function(){createjs.Tween.get(l).to({alpha:1},200,createjs.Ease.cubicOut).call((function(){s_oGame.placePiecesInCorrectPosition(),createjs.Tween.get(l).to({alpha:0},200,createjs.Ease.cubicOut).call((function(){s_oGame.playFinalEffect()}))}))},this.resetFullscreenBut=function(){null},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this._onExit=function(){s_oGame.pause(!0),_.show(TEXT_ARE_YOU_SURE),_.addEventListener(ON_RELEASE_YES,this._onReleaseYes),_.addEventListener(ON_RELEASE_NO,this._onReleaseNo)},this._onReleaseYes=function(){$(s_oMain).trigger("end_session"),$(s_oMain).trigger("show_interlevel_ad"),s_oGame.onExit()},this._onReleaseNo=function(){s_oGame.pause(!1)},this._onPreviewRelease=function(){t=!t,s_oGame.showPreview(t)},this._onRotationRelease=function(){e=!e,s_oGame.toggleRotation(e)},this._onRestartRelease=function(){s_oGame.restart()},this._onFullscreenRelease=function(){s_bFullscreen?null.call(window.document):null.call(window.document.documentElement),sizeHandler()},this.isPreviewVisible=function(){return t},this.isRotationActive=function(){return e},s_oInterface=this,this._init(),this}var s_oInterface=null;