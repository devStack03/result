var s_iOffsetX,s_iOffsetY,s_iScaleFactor=1,s_bIsIphone=!1,s_bFocus=!0;function trace(e){console.log(e)}function getSize(e){var n,t=e.toLowerCase(),o=window.document,i=o.documentElement;if(void 0===window["inner"+e])n=i["client"+e];else if(window["inner"+e]!=i["client"+e]){var s=o.createElement("body");s.id="vpw-test-b",s.style.cssText="overflow:scroll";var a=o.createElement("div");a.id="vpw-test-d",a.style.cssText="position:absolute;top:-1000px",a.innerHTML="<style>@media("+t+":"+i["client"+e]+"px){body#vpw-test-b div#vpw-test-d{"+t+":7px!important}}</style>",s.appendChild(a),i.insertBefore(s,o.head),n=7==a["offset"+e]?i["client"+e]:window["inner"+e],i.removeChild(s)}else n=window["inner"+e];return n}function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler(),window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIphone(){return-1!==navigator.userAgent.toLowerCase().indexOf("iphone")}function isIOS(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0,!0;for(;e.length;)if(navigator.platform===e.pop())return!0;return s_bIsIphone=!1,!1}function getIOSWindowHeight(){var e=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*e}function getHeightOfIOSToolbars(){var e=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return e>1?e:0}function isIpad(){var e=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!!(!e&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)||e}function isMobile(){return!!isIpad()||jQuery.browser.mobile}function sizeHandler(){if(window.scrollTo(0,1),$("#canvas")){var e;e=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var n=getSize("Width");s_bFocus&&_checkOrientation(n,e);var t=Math.min(e/CANVAS_HEIGHT,n/CANVAS_WIDTH),o=Math.round(CANVAS_WIDTH*t),i=Math.round(CANVAS_HEIGHT*t),s=0;i<e?(i+=s=e-i,o+=s*(CANVAS_WIDTH/CANVAS_HEIGHT)):o<n&&(o+=s=n-o,i+=s*(CANVAS_HEIGHT/CANVAS_WIDTH));var a=e/2-i/2,r=n/2-o/2,c=CANVAS_WIDTH/o;if((r*c<-EDGEBOARD_X||a*c<-EDGEBOARD_Y)&&(t=Math.min(e/(CANVAS_HEIGHT-2*EDGEBOARD_Y),n/(CANVAS_WIDTH-2*EDGEBOARD_X)),o=Math.round(CANVAS_WIDTH*t),a=(e-(i=Math.round(CANVAS_HEIGHT*t)))/2,r=(n-o)/2,c=CANVAS_WIDTH/o),s_iOffsetX=-1*r*c,s_iOffsetY=-1*a*c,a>=0&&(s_iOffsetY=0),r>=0&&(s_iOffsetX=0),null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oForm&&s_oForm.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oChooseImagePanel&&s_oChooseImagePanel.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oChooseDifficultyPanel&&s_oChooseDifficultyPanel.refreshButtonPos(s_iOffsetX,s_iOffsetY),console.log(s_iOffsetX),s_bIsIphone){canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*o,s_oStage.canvas.height=2*i,canvas.style.width=o+"px",canvas.style.height=i+"px";var l=Math.min(o/CANVAS_WIDTH,i/CANVAS_HEIGHT);s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor=2*l}else s_bMobile||isChrome()?($("#canvas").css("width",o+"px"),$("#canvas").css("height",i+"px")):(s_oStage.canvas.width=o,s_oStage.canvas.height=i,s_iScaleFactor=Math.min(o/CANVAS_WIDTH,i/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);a<0||(a=(e-i)/2),$("#canvas").css("top",a+"px"),$("#canvas").css("left",r+"px"),fullscreenHandler()}}function _checkOrientation(e,n){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(e>n?"landscape"===ORIENTATION?($(".orientation-msg-container_"+LANGUAGES[CURRENT_LANGUAGE]).css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container_"+LANGUAGES[CURRENT_LANGUAGE]).css("display","block"),s_oMain.stopUpdate()):(console.log("here"),"portrait"===ORIENTATION?($(".orientation-msg-container_"+LANGUAGES[CURRENT_LANGUAGE]).css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container_"+LANGUAGES[CURRENT_LANGUAGE]).css("display","block"),s_oMain.stopUpdate())))}function playSound(e,n,t){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[e].play(),s_aSounds[e].volume(n),s_aSounds[e].loop(t),s_aSounds[e]):null}function stopSound(e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].stop()}function setVolume(e,n){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].volume(n)}function setMute(e,n){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].mute(n)}function createBitmap(e,n,t){var o=new createjs.Bitmap(e),i=new createjs.Shape;return n&&t?i.graphics.beginFill("#fff").drawRect(0,0,n,t):i.graphics.beginFill("#ff0").drawRect(0,0,e.width,e.height),o.hitArea=i,o}function createSprite(e,n,t,o,i,s){if(null!==n)var a=new createjs.Sprite(e,n);else a=new createjs.Sprite(e);var r=new createjs.Shape;return r.graphics.beginFill("#000000").drawRect(-t,-o,i,s),a.hitArea=r,a}function randomFloatBetween(e,n,t){return void 0===t&&(t=2),parseFloat(Math.min(e+Math.random()*(n-e),n).toFixed(t))}function rotateVector2D(e,n){var t=n.getX()*Math.cos(e)+n.getY()*Math.sin(e),o=n.getX()*-Math.sin(e)+n.getY()*Math.cos(e);n.set(t,o)}function tweenVectorsOnX(e,n,t){return e+t*(n-e)}function shuffle(e){for(var n,t,o=e.length;0!==o;)t=Math.floor(Math.random()*o),n=e[o-=1],e[o]=e[t],e[t]=n;return e}function bubbleSort(e){var n;do{n=!1;for(var t=0;t<e.length-1;t++)if(e[t]>e[t+1]){var o=e[t];e[t]=e[t+1],e[t+1]=o,n=!0}}while(n)}function compare(e,n){return e.index>n.index?-1:e.index<n.index?1:0}function easeLinear(e,n,t,o){return t*e/o+n}function easeInQuad(e,n,t,o){return t*(e/=o)*e+n}function easeInSine(e,n,t,o){return-t*Math.cos(e/o*(Math.PI/2))+t+n}function easeInCubic(e,n,t,o){return t*(e/=o)*e*e+n}function getTrajectoryPoint(e,n){var t=new createjs.Point,o=(1-e)*(1-e),i=e*e;return t.x=o*n.start.x+2*(1-e)*e*n.traj.x+i*n.end.x,t.y=o*n.start.y+2*(1-e)*e*n.traj.y+i*n.end.y,t}function formatTime(e){e/=1e3;var n=Math.floor(e/60),t=Math.floor(e-60*n),o="";return o+=n<10?"0"+n+":":n+":",o+=t<10?"0"+t:t}function degreesToRadians(e){return e*Math.PI/180}function distance(e,n){return Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))}function distance2(e,n){return(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)}function NoClickDelay(e){this.element=e,window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(e){for(var n,t,o=e.length;o>0;)t=Math.floor(Math.random()*o),n=e[--o],e[o]=e[t],e[t]=n;return e}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}function getParamValue(e){for(var n=window.location.search.substring(1).split("&"),t=0;t<n.length;t++){var o=n[t].split("=");if(o[0]==e)return o[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oChooseImagePanel&&s_oChooseImagePanel.resetFullscreenBut(),null!==s_oChooseDifficultyPanel&&s_oChooseDifficultyPanel.resetFullscreenBut())}!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),$(window).resize((function(){sizeHandler()})),window.addEventListener("orientationchange",onOrientationChange),NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},onTouchStart:function(e){e.preventDefault(),this.moved=!1,this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)},onTouchMove:function(e){this.moved=!0},onTouchEnd:function(e){if(this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1),!this.moved){var n=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);3==n.nodeType&&(n=n.parentNode);var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),n.dispatchEvent(t)}}},function(){var e="hidden";function n(n){var t="visible",o="hidden",i={focus:t,focusin:t,pageshow:t,blur:o,focusout:o,pagehide:o};(n=n||window.event).type in i?document.body.className=i[n.type]:(document.body.className=this[e]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}e in document?document.addEventListener("visibilitychange",n):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(e="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n}(),screenfull.isEnabled&&screenfull.on("change",(function(){s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oChooseImagePanel&&s_oChooseImagePanel.resetFullscreenBut(),null!==s_oChooseDifficultyPanel&&s_oChooseDifficultyPanel.resetFullscreenBut()}));